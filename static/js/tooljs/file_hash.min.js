function file_size(a){for(var e=0;1024<=Math.abs(a)&&(a/=1024,e++,4!=e););$units=["Bytes","KB","MB","GB","TB"];$newsize=a.toFixed(4);return $newsize+$units[e]}
handlefile=function(a){function e(){var c=a.currentChunk*a.chunkSize;a.filereader.readAsBinaryString(blobSlice.call(a.file,c,c+a.chunkSize>=a.file_size?a.file_size:c+a.chunkSize))}blobSlice=File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice;a.base_progress.addClass(" am-active").fadeIn("slow");a.filereader.onloadstart=function(){};a.filereader.onprogress=function(c){a.loaded+=c.loaded;a.loaded_local.text(file_size(a.loaded));a.load_progress.css("width",a.loaded/a.file.size*
100+"%")};a.filereader.onloadend=function(a){};a.filereader.onabort=function(a){alert("\u4e0a\u4f20\u5f02\u5e38\u4e2d\u65ad\uff01\u6709\u95ee\u9898\u8bf7\u52a0QQ\u7fa4;288171956")};a.filereader.onerror=function(a){alert("error\uff1a\u4e0a\u4f20\u5931\u8d25:(\u6709\u95ee\u9898\u53ef\u4ee5\u52a0QQ\u7fa4:288171956")};a.filereader.onload=function(c){$.each(a.crypto_list,function(e,g){g.crypto_value.update(a.crypto.enc.Latin1.parse(c.target.result))});a.currentChunk++;a.currentChunk<a.chunks?e():($.each(a.crypto_list,
function(e,c){a.handle_table_tr+='<tr><td width="25%" style="color:#F27B1D"><strong>'+c.crypto_name+'</strong></td><td width="70%" style="word-break:break-all; word-wrap:break-all;">'+c.crypto_value.finalize()+"</td></tr>"}),a.base_progress.removeClass("am-active").fadeOut("show"),a.handle_table.append(a.handle_table_tr))};e()};
$(function(){$("#upload-files").on("change",function(){if(!(window.File||window.FileReader||window.FileList||window.Blob)||window.ActiveXObject||"ActiveXObject"in window)alert("\u60a8\u7684\u6d4f\u89c8\u5668\u4e3aIE\u6216\u5b9e\u5728\u592a\u8001\u4e86\u5bf9HTML5\u517c\u5bb9\u6027\u5dee\uff0c\u8bf7\u66f4\u65b0\u6216\u66f4\u6362\u6700\u65b0\u706b\u72d0\u6216Chrome:\uff09");else{var a=$("#hash_md5").get(0).checked,e=$("#hash_sha1").get(0).checked,c=$("#hash_sha224").get(0).checked,k=$("#hash_sha256").get(0).checked,
g=$("#hash_sha384").get(0).checked,l=$("#hash_sha512").get(0).checked,m=$("#hash_ripemd-160").get(0).checked,h=$("#table_result");h.empty();for(var d=0,f;f=this.files[d];d++){crypto_list=[];if(a){var b=CryptoJS.algo.MD5.create();crypto_list.push({crypto_name:"HASH MD5",crypto_value:b})}e&&(b=CryptoJS.algo.SHA1.create(),crypto_list.push({crypto_name:"HASH SHA1",crypto_value:b}));c&&(b=CryptoJS.algo.SHA224.create(),crypto_list.push({crypto_name:"HASH SHA224",crypto_value:b}));k&&(b=CryptoJS.algo.SHA256.create(),
crypto_list.push({crypto_name:"HASH SHA256",crypto_value:b}));g&&(b=CryptoJS.algo.SHA384.create(),crypto_list.push({crypto_name:"HASH SHA384",crypto_value:b}));l&&(b=CryptoJS.algo.SHA512.create(),crypto_list.push({crypto_name:"HASH SHA512",crypto_value:b}));m&&(b=CryptoJS.algo.RIPEMD160.create(),crypto_list.push({crypto_name:"HASH RIPEMD-160",crypto_value:b}));filereader=new FileReader;b={file:"",file_size:f.size,crypto:CryptoJS,base_progress:"",load_progress:"",handle_table:"",handle_table_tr:"",
file_sign:"",currentChunk:0,chunkSize:4096,chunks:Math.ceil(f.size/4096),loaded_str:"",loaded:0,loaded_local:"",crypto_list:crypto_list,filereader:filereader};filetablist="";$("#file-list").append('<span class="am-badge">'+f.name+"</span> ");filetablist+='<div id="base-progress-'+d+'" class="am-progress am-progress-striped" style="display: none;"><div id="up-progress-'+d+'" class="am-progress-bar am-progress-bar-warning" style="width: 0%"></div></div><table id="show_result_'+d+'" class="am-table am-table-striped am-table-hover am-monospace"><tr><th width="25%">KEY</th><th width="70%">VALUE</th> </tr><tr> <td style="color: green;word-break:break-all" >'+
f.name+'</td> <td style="color: green;" title="\u5206\u7247\u8bfb\u53d6\uff0c\u5927\u5c0f\u4f1a\u6709\u7ec6\u5fae\u8bef\u5dee\uff0c\u4e0d\u4f1a\u5f71\u54cd\u7ed3\u679c">\u5927\u5c0f:<span id="loaded_'+d+'">0</span>/'+file_size(f.size)+"</td></tr></table>";h.append(filetablist);b.file=f;b.crypto=CryptoJS;b.base_progress=$("#base-progress-"+d);b.load_progress=$("#up-progress-"+d);b.handle_table=$("#show_result_"+d);b.loaded_local=$("#loaded_"+d);b.handle_table_tr="";b.file_sign=d;handlefile(b)}}})});